<!-- #BeginTemplate "templatesubdir.dwt" -->
<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<!-- #BeginEditable "TITLE" -->
<title>Der neue Personalausweis</title>
<!-- #EndEditable -->
<link rel=stylesheet type="text/css" href="../style.css">
<meta name="author" content="Andreas Schwier">
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="750" align="center">
  <tr>
    <td height="80" colspan="5" class="pb"><div align="left"><a href="http://www.cardcontact.de"><img src="../banner.jpg" width="750" height="80" border="0"></a></div></td>
  </tr>
  <tr height="20">
  </tr>
  <tr>
    <td width="130" valign="top" align="left">
    <br>
    <p><b>Script Collection</b></p>
    <a href="../index.html">Home</a><br>
    <a href="http://www.openscdp.org/scripts/download.html">Download</a><br>
    <br>
    <a href="../cardsim/index.html">Card Simulation</a><br>
    <a href="../cardsim/index.html">Testing</a><br>
    <br>
    <a href="../eID/index.html">German eID (nPA)</a><br>
    <a href="../eGK/index.html">German eGK</a><br>
    <a href="../HPC/index.html">German HPC</a><br>
    <a href="../kvk/index.html">German KVK</a><br><br>
    <a href="../icao/index.html">ICAO MRTD</a><br>
    <a href="../gp/index.html">GP Card</a><br>
    <a href="../musclecard/index.html">MuscleCard</a><br>
    <a href="../pkcs15/index.html">PKCS#15 Card</a><br>
    <a href="../emv/index.html">EMV</a><br>
    <br>
    <a href="../tutorial/index.html">Tutorial</a><br>
    <br>
    <a href="http://www.openscdp.org">OpenSCDP</a><br>
    <a href="http://www.cardcontact.de/company/contact.html">Contact</a><br>
    </td>
    <td width="630" align="left">
    <br/>
<!-- #BeginEditable "BODY" -->
<h1>"Preparing the Stage"</h1>
<p>Um die folgenden Schritte selbst nachzuvollziehen muss die Smart Card Shell (aktuelle Beta), ein
   kontaktloser Kartenleser und die Scriptsammlung installiert sein. Die notwendigen Scripte befinden
   sich im eID und icao Verzeichnis. Das hier benutzte Script doeac.js findet sich im Verzeichnis eID.</p>
<p>Sollte kein nPA oder kein Kartenleser zur Verfügung stehen, so kann auch die Simulation des nPA
   verwendet werden. Hierfür muss eine weitere Instanz der Smart Card Shell gestartet und das Script
   eID/eidsim.js ausgeführt werden. Die Simulation ist allerdings derzeit noch nicht vollständig.</p>
<p>Die Kommunikation mit den nPA startet mit einem Reset. Im doeac.js Script wird dies erreicht mit</p>
<pre>
var card = new Card(_scsh3.reader);
card.reset(Card.RESET_COLD);
</pre>
<p>Mit Hilfe des card Objekts können nun APDUs zum nPA übertragen und empfangen werden (card.sendApdu()).
   Das Script baut und versendet diese APDUs jedoch nicht selbst, sondern verwendet ein EAC Protokoll
   Objekt, dass mit</p>
<pre>
var eac = new EAC20(crypto, card);
</pre>
<p>erzeugt wird. Die EAC20 Klasse ist im Script icao/eac20.js definiert.</p>
<p>Die Konfiguration des Protokolls erfolgt über Parameter, die in der Datei EF.CardInfo auf dem nPA 
   gespeichert sind. Im ersten Schritt werden diese Parameter ausgelesen:</p>
<pre>
eac.readCardInfo();
</pre>

<p>Wird fortgesetzt...</p>
<!-- #EndEditable -->
<br>
<p class="copyright">&copy; Copyright 2003 - 2010 <a href="http://www.cardcontact.de">CardContact</a>
Software & System Consulting, Minden, Germany</p>
    </td>
  </tr>
</table>
</body>
</html><!-- #EndTemplate -->